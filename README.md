# Remember

When you do a Brew Upgrade, you may change versions of cmake, and/or the MaxOSX sdk

```zsh
cmake  â‡’ ../Cellar/cmake/3.24.2/bin/cmake
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX12.3.sdk
```

It'll cause make to fail saying it can't find the old version of cmake.

You'll thus want to run this command:

```zsh
cmake --build . --target clean
```

This will romance cmake into tidying up all your CMakeCache.txt and Makefile version identifiers.

You want to set up the lldb-mi. See
[https://code.visualstudio.com/docs/cpp/lldb-mi](https://code.visualstudio.com/docs/cpp/lldb-mi)

```zsh
ls -lt ~/.vscode/extensions/ms-vscode.cpptools-1.12.4-darwin-x64/debugAdapters/lldb-mi/bin/lldb-mi
cp ~/.vscode/extensions/ms-vscode.cpptools-1.12.4-darwin-x64/debugAdapters/lldb-mi/bin/lldb-mi \
   /Applications/Xcode.app/Contents/SharedFrameworks/LLDB.framework
```

Edit launch.json to add

```json
"miDebuggerPath": "/Applications/Xcode.app/Contents/SharedFrameworks/LLDB.framework/lldb-mi"
```

## Platform Dependencies

MacOS security makes gdb almost unusable. At least, I haven't figured out how. Thus when you want to debug on a Mac, always use lldb. Use gdb on Linux.

On Windows, cmake doesn't work as automatically as it does on Linux and MacOS.

When you do the command to --target clean it will delete the chronos.exe

However, in Windows and cmake there's a bunch of vcxproj files generated in out\build\x86-windows when you start Visual Studio Code.

The cmake command uses --fresh and --build and --target differently on
a Windows system. if you say cmake --fresh ., it will put a .sln and
several vcxproj files into your root directory. And it will NOT
generate any Makefile.

If you just start Visual Studio Code, it will automagically generate a
directory out\build\x86-windows that has a passel of vcxproj
files. Noteworthy is ALL_BUILD.vcxproj and chronos.sln reside therein.

I think I have to manually keep CMakePresets.json in synch with
this. In particular, the targets named in "buildPresets" /
"x86-windows" has to match the vcproj files named in chronos.sln
generated by cmake from the CMakeLists.txt. I worry that the TARGET in
the CMakeLists.txt file may not be consistent with the TARGET that is
named in CMakePresets.json

Note that inclusion of CTest and CPack into CMakeLists.txt adds a fair
bit of complexity that may twist my head in knots when integrating
with VS Code and its plug-ins on divers platforms.
